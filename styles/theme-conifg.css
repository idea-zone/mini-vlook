:root {
    /* 主色 */
    --b3-theme-primary: rgba(var(--m-theme2-alt),1);
    --b3-theme-primary-light: rgba(var(--m-theme2-alt), .54);
    --b3-theme-primary-lighter: rgba(var(--m-theme2-alt), .38);
    --b3-theme-primary-lightest: rgba(var(--m-theme2-alt), .12);

    --b3-theme-secondary: rgba(var(--m-theme2-alt),1);

    --b3-theme-background: var(--m-d-bc);
    --b3-theme-background-light: #dfe0e1;
    --b3-theme-surface: var(--m-pn-c);
    --b3-theme-surface-light: rgba(243, 243, 243, .86);
    --b3-theme-surface-lighter: var(--m-pn-c-a);
    --b3-theme-error: var(--m-ac-rd); /*#d23f31;*/
    --b3-theme-success:var(--m-ac-gn); /*#65b84d;*/

    /* 文字颜色 */
    --b3-theme-on-primary: var(--m-theme1-on-background);
    --b3-theme-on-secondary: var(--m-theme2-on-background);
    --b3-theme-on-background: var(--m-d-fc);
    --b3-theme-on-surface: #5f6368;
    --b3-theme-on-surface-light: rgba(95, 99, 104, .68);
    --b3-theme-on-error: #fff;

    /* 字体 */
    /* Windows 斜体遮挡添加 "Segoe UI" 字体 https://github.com/siyuan-note/siyuan/issues/11841 */
    --b3-font-family: var(--m-v-f-fm-text),"Emojis Additional", emojis;
    --b3-font-family-protyle: var(--b3-font-family),"Emojis Additional", emojis;
    --b3-font-family-code: var(--m-v-f-fm-code),"Emojis Additional", emojis;
    --b3-font-family-graph: mononoki,"Emojis Additional", emojis;
    --b3-font-family-emoji: "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "Android Emoji","Emojis Additional", emojis;
    --b3-font-family-math: KaTeX_Math,"Emojis Additional", emojis;
    --b3-font-size: 14px;

    /* 顶部工具栏 */
    --b3-toolbar-background: var(--m-theme1-background);
    --b3-toolbar-blur-background: var(--m-theme1-on-background);
    --b3-toolbar-color: var(--b3-theme-on-surface);
    --b3-toolbar-hover: var(--b3-theme-background-light);
    --b3-toolbar-left-mac: 69px;

    /* 线条 */
    --b3-border-color: var(--b3-theme-surface-lighter);
    --b3-border-radius: 6px;
    --b3-border-radius-s: 3px;
    --b3-border-radius-b: 12px;

    /* 滚动条 */
    --b3-scroll-color: rgba(0, 0, 0, .2);

    /* 列表 */
    /* --b3-list-hover: rgba(0, 0, 0, .075);
    --b3-list-icon-hover: rgba(33, 34, 36, .1); */
    --b3-list-hover: var(--m-theme2-alt-0-8);
    --b3-list-icon-hover: var(--m-theme2-alt-0-6);

    /* 菜单 */
    --b3-menu-background: var(--b3-theme-surface);

    /* 提示 */
    --b3-tooltips-background: var(--m-theme2-alt-0-8);  /*rgba(0, 0, 0, .9);*/
    --b3-tooltips-color: var(--m-theme2-on-background); 
    --b3-tooltips-second-color: var(--m-theme1-background);
    --b3-tooltips-shadow: 0 2px 8px rgba(0, 0, 0, .1);

    /* av */
    --b3-av-hover: #e8e8e9;
    --b3-av-background-hl: #e8eefc;

    /* table: new */
    --b3-table-even-background: var(--m-tbl-td-bg);

    /* 为空提示 */
    --b3-empty-color: var(--b3-theme-on-surface-light);

    /* 遮罩 */
    --b3-mask-background: rgba(220, 220, 220, .4);

    /* 卡片背景 */
    /* --b3-card-error-color: rgb(97, 26, 21);
    --b3-card-error-background: #f5d1cf;
    --b3-card-warning-color: rgb(102, 60, 0);
    --b3-card-warning-background: #ffe8c8;
    --b3-card-info-color: rgb(13, 60, 97);
    --b3-card-info-background: #d6eaf9;
    --b3-card-success-color: rgb(30, 70, 32);
    --b3-card-success-background: #d7eed8; */
    --b3-card-error-color: var(--m-ac-pk);
    --b3-card-error-background: var(--m-ac-pk-a);
    --b3-card-warning-color: var(--m-ac-og);
    --b3-card-warning-background: var(--m-ac-og-a);
    --b3-card-info-color: var(--m-ac-se);
    --b3-card-info-background: var(--m-ac-se-a); 
    --b3-card-success-color: var(--m-ac-ol); 
    --b3-card-success-background: var(--m-ac-ol-a); 


    /* 自定义文字 */
    /* --b3-font-color1: var(--b3-card-error-color);
    --b3-font-color2: var(--b3-card-warning-color);
    --b3-font-color3: var(--b3-card-info-color);
    --b3-font-color4: var(--b3-card-success-color);
    --b3-font-color5: var(--b3-theme-on-surface);
    --b3-font-color6: var(--b3-theme-primary);
    --b3-font-color7: var(--b3-theme-secondary);
    --b3-font-color8: var(--b3-theme-error);
    --b3-font-color9: var(--m-ac-pk); 
    --b3-font-color10: var(--m-ac-pu); 
    --b3-font-color11: var(--m-ac-lm); 
    --b3-font-color12: var(--m-ac-ye);
    --b3-font-color13: var(--b3-theme-background);
    --b3-font-background1: var(--b3-card-error-background);
    --b3-font-background2: var(--b3-card-warning-background);
    --b3-font-background3: var(--b3-card-info-background);
    --b3-font-background4: var(--b3-card-success-background);
    --b3-font-background5: var(--b3-theme-surface); 
    --b3-font-background6: var(--b3-theme-on-primary);
    --b3-font-background7: var(--b3-theme-error);
    --b3-font-background8: var(--m-ac-rd-a);
    --b3-font-background9: var(--m-ac-pk-a);
    --b3-font-background10: var(--m-ac-pu-a);
    --b3-font-background11: var(--m-ac-lm-a);
    --b3-font-background12: var(--m-ac-ye-a);
    --b3-font-background13: var(--b3-theme-on-background); */

    --b3-font-color1: var(--m-ac-rd); 
    --b3-font-color2: var(--m-ac-pu); 
    --b3-font-color3: var(--m-ac-og); 
    --b3-font-color4: var(--m-ac-gn); 
    --b3-font-color5: var(--m-ac-cy); 
    --b3-font-color6: var(--m-ac-bu); 
    --b3-font-color7: var(--m-ac-vn); 
    --b3-font-color8: var(--m-ac-bn); 
    --b3-font-color9: var(--m-ac-t1); 
    --b3-font-color10: var(--m-ac-t2); 
    --b3-font-color11: var(--m-ac-gy); 
    --b3-font-color12: var(--m-ac-ro); 
    --b3-font-color13: var(--b3-theme-background); 
    --b3-background1-color1: var(--m-ac-rd-a); 
    --b3-background1-color2: var(--m-ac-pu-a); 
    --b3-background1-color3: var(--m-ac-og-a); 
    --b3-background1-color4: var(--m-ac-gn-a); 
    --b3-background1-color5: var(--m-ac-cy-a); 
    --b3-background1-color6: var(--m-ac-bu-a); 
    --b3-background1-color7: var(--m-ac-vn-a); 
    --b3-background1-color8: var(--m-ac-bn-a); 
    --b3-background1-color9: var(--m-ac-t1-a); 
    --b3-background1-color10: var(--m-ac-t2-a); 
    --b3-background1-color11: var(--m-ac-gy-a); 
    --b3-background1-color12: var(--m-ac-ro-a); 
    --b3-background1-color13: var(--b3-theme-on-background);
    
    /* 动画效果 */
    --b3-transition: all .2s cubic-bezier(0, 0, .2, 1) 0ms;
    --b3-width-transition: width .2s cubic-bezier(0, 0, .2, 1) 0ms;
    --b3-color-transition: color .2s cubic-bezier(0, 0, .2, 1) 0ms;
    --b3-background-transition: background 20ms ease-in 0s;

    /* 高亮 */
    --b3-highlight-color: #222;
    --b3-highlight-background: #ffff00;
    --b3-highlight-current-background: #ff9632;

    /* 下拉菜单 */
    --b3-select-background: url("data:image/svg+xml;utf8,<svg fill='rgba(95, 99, 104, .68)' height='24' viewBox='0 0 24 24' width='24' xmlns='http://www.w3.org/2000/svg'><path d='M7 10l5 5 5-5z'/><path d='M0 0h24v24H0z' fill='none'/></svg>") no-repeat right 2px center var(--b3-theme-background);

    
    /* switch */
    --b3-switch-background: #e1e3e1;
    --b3-switch-border: var(--b3-theme-on-surface-light);
    --b3-switch-hover: rgba(31, 31, 31, 0.06);
    --b3-switch-checked: #fff;
    --b3-switch-checked-background: var(--b3-theme-primary);
    --b3-switch-checked-hover: #d3e3fd;
    --b3-switch-checked-hover2: rgba(31, 31, 31, .06);

    /* 阴影 */
    --b3-point-shadow: 0 0 1px 0 rgba(0, 0, 0, .1), 0 0 2px 0 rgba(0, 0, 0, .2);
    --b3-dialog-shadow: 0 8px 24px rgba(0, 0, 0, .2);
    --b3-button-shadow: 0 5px 5px -3px rgb(0 0 0 / .2), 0 8px 10px 1px rgb(0 0 0 / .14), 0 3px 14px 2px rgb(0 0 0 / .12);

    /* 图表颜色 */
    --b3-graph-p-point: #076f7e;
    --b3-graph-heading-point: #8250df;
    --b3-graph-math-point: #80FFA5;
    --b3-graph-code-point: #00DDFF;
    --b3-graph-table-point: #37A2FF;
    --b3-graph-list-point: #FF0087;
    --b3-graph-todo-point: #FFBF00;
    --b3-graph-olist-point: #b3005f;
    --b3-graph-listitem-point: #f65b00;
    --b3-graph-bq-point: #8d48e3;
    --b3-graph-super-point: #dd79ff;
    --b3-graph-doc-point: #202124;
    --b3-graph-tag-point: #dbf32f;
    --b3-graph-asset-point: #05c091;
    --b3-graph-line: #5f6368;
    --b3-graph-ref-line: #d23f31;
    --b3-graph-tag-line: #5f6b06;
    --b3-graph-tag-tag-line: #dbf32f;
    --b3-graph-asset-line: #037457;
    --b3-graph-hl-point: #f3a92f;
    --b3-graph-hl-line: #4285f4;

    /* 编辑器搜索颜色 */
    --b3-protyle-search-background: #ffe955;
    --b3-protyle-search-border-color: #f2e680;
    --b3-protyle-search-current-background: #a5d3fe;

    /* 代码片段背景 */
    --b3-protyle-code-background: rgba(27, 31, 35, .05);

    /* 所见即所得行内元素颜色 */
    --b3-protyle-inline-strong-color:  inherit;
    --b3-protyle-inline-em-color:  inherit;
    --b3-protyle-inline-s-color:  inherit;
    --b3-protyle-inline-link-color: var(--m-theme1-background);
    --b3-protyle-inline-mark-background: var(--m-inline-mark-bg-color);
    --b3-protyle-inline-mark-color: var(--m-inline-mark-color);
    --b3-protyle-inline-tag-color: var(--m-inline-tag-color);
    --b3-protyle-inline-blockref-color: var(--m-theme1-background);
    --b3-protyle-inline-fileref-color: #21862e;

    /* PDF */
    --b3-pdf-selection: #d0e9c8;
    --sidebar-width: 200px;  /* --sidebar-width */
    --b3-pdf-offset: 0;
    --b3-pdf-background1: var(--b3-theme-error);
    --b3-pdf-background2: #f5822e;
    --b3-pdf-background3: #FACA5A;
    --b3-pdf-background4: #7CC868;
    --b3-pdf-background5: #FC5C88;
    --b3-pdf-background6: #69B0F2;
    --b3-pdf-background7: #C885DA;
    --b3-pdf-dark: #212224;

    /* 表格 */
    --b3-table-even-background: rgba(0, 0, 0, .02);

    /* 嵌入块 */
    --b3-embed-background: transparent;

    /* 引述块 */
    --b3-bq-background: transparent;

    /* 父块颜色 */
    --b3-parent-background: var(--b3-theme-background);
}

/* 微软字体斜体会被相邻背景遮挡，将 arial 放置其前 https://github.com/siyuan-note/siyuan/issues/11841；"Segoe UI" 和 Noto-COLRv1-2.047 冲突，故移除。 */
:root:lang(zh_CN) {
    --b3-font-family: "Emojis Additional", "Emojis Reset", BlinkMacSystemFont, Helvetica, "PingFang SC", "Luxi Sans", "DejaVu Sans", "Hiragino Sans GB", "Source Han Sans SC", arial, "Microsoft Yahei", sans-serif, emojis;
}

:root:lang(zh_CHT) {
    --b3-font-family: "Emojis Additional", "Emojis Reset", BlinkMacSystemFont, Helvetica, "PingFang TC", "Luxi Sans", "DejaVu Sans", "Hiragino Sans TC", "Source Han Sans TC", "Microsoft JhengHei", arial, sans-serif, emojis;
}

:root:lang(ja_JP) {
    --b3-font-family: "Emojis Additional", "Emojis Reset", BlinkMacSystemFont, Helvetica, "Luxi Sans", "DejaVu Sans", "Hiragino Sans", "Yu Gothic UI", arial, sans-serif, emojis;
}

/* https://github.com/siyuan-note/siyuan/issues/6440 */
.protyle-action--order:after {
    mix-blend-mode: multiply;
}

.b3-typography .code-block, .protyle-wysiwyg .code-block {
    background-color: rgba(27, 31, 35, .05);
}

